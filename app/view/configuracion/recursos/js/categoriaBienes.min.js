function eliminarCategoriaBien(e){const t=e.getAttribute("data-id"),o=e.getAttribute("data-nombre");t?Swal.fire({title:"¿Está seguro?",text:`¿Deseas eliminar la categoría "${o}"? Esta acción no se puede deshacer.`,icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&fetch("/gestion/app/controller/CategoriaBienesController.php?action=eliminarCategoria",{method:"POST",body:new URLSearchParams({id:t})}).then(e=>e.json()).then(e=>{"success"===e.status?Swal.fire({icon:"success",title:"¡Éxito!",text:"Categoría eliminada exitosamente.",confirmButtonText:"Aceptar"}).then(()=>location.reload()):Swal.fire({icon:"error",title:"Error",text:e.message||"No se pudo eliminar la categoría. Verifica que no tenga bienes asociados.",confirmButtonText:"Aceptar"})}).catch(e=>showError("Ocurrió un error inesperado. Intenta de nuevo.",e))}):showError("ID no válido para eliminar la categoría.")}function showError(e,t=null){Swal.fire({icon:"error",title:"Error",text:e,confirmButtonText:"Aceptar"}),t&&console.error("Error:",t)}function handleResponse(e,t){"success"===e.status?Swal.fire({icon:"success",title:"¡Éxito!",text:t||e.message,confirmButtonText:"Aceptar"}).then(()=>location.reload()):Swal.fire({icon:"error",title:"Error",text:e.message||"Algo salió mal.",confirmButtonText:"Aceptar"})}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("formCrearCategoria");e&&e.addEventListener("submit",function(e){e.preventDefault();const t=new FormData(this);fetch("/gestion/app/controller/CategoriaBienesController.php?action=crearCategoria",{method:"POST",body:t}).then(e=>e.json()).then(e=>handleResponse(e,"Categoría creada exitosamente.")).catch(e=>showError("Ocurrió un error inesperado. Intenta de nuevo.",e))});const t=document.getElementById("formEditarCategoria");t&&t.addEventListener("submit",function(e){e.preventDefault();const t=new FormData(this);fetch("/gestion/app/controller/CategoriaBienesController.php?action=editarCategoria",{method:"POST",body:t}).then(e=>e.json()).then(e=>handleResponse(e,"Categoría actualizada exitosamente.")).catch(e=>showError("Ocurrió un error inesperado. Intenta de nuevo.",e))});const o=document.getElementById("editModal");o&&o.addEventListener("show.bs.modal",function(e){const t=e.relatedTarget;if(!t)return;const o=t.getAttribute("data-id"),n=t.getAttribute("data-nombre");document.getElementById("edit-id").value=o,document.getElementById("edit-nombre").value=n})});